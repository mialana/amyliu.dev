---
import { Image } from "astro:assets";
import Headshot2025_1 from "@/assets/png/headshot-2025.png";
import Headshot2025_2 from "@/assets/png/headshot-2025-2.png";
import Headshot2025_3 from "@/assets/png/headshot-2025-3.png";
---

<div class="relative w-full">
    <!-- Desktop: Show all three side by side -->
    <div
        class="hidden flex-row items-center justify-center gap-4 *:aspect-square *:w-1/5 *:rounded-lg md:flex"
    >
        <Image
            src={Headshot2025_1}
            alt="Amy Liu Headshot 1 from University of Pennsylvania"
            width={800}
            height={800}
        />
        <Image
            src={Headshot2025_2}
            alt="Amy Liu Headshot 2 from Barcelona, Spain"
            width={800}
            height={800}
        />
        <Image
            src={Headshot2025_3}
            alt="Amy Liu Headshot 3 from Seoul, South Korea"
            width={800}
            height={800}
        />
    </div>

    <!-- Mobile: Show one at a time with transitions -->
    <div
        class="aspect-square *:absolute *:inset-0 *:rounded-lg *:transition-opacity *:duration-1000 md:hidden"
    >
        <Image
            src={Headshot2025_1}
            alt="Amy Liu Headshot 1 from University of Pennsylvania"
            width={800}
            height={800}
            class="headshot-image"
            data-index="0"
        />
        <Image
            src={Headshot2025_2}
            alt="Amy Liu Headshot 2 from Barcelona, Spain"
            width={800}
            height={800}
            class="headshot-image opacity-0"
            data-index="1"
        />
        <Image
            src={Headshot2025_3}
            alt="Amy Liu Headshot 3 from Seoul, South Korea"
            width={800}
            height={800}
            class="headshot-image opacity-0"
            data-index="2"
        />
    </div>
</div>

<script>
    // Only run on mobile devices
    let intervalId: NodeJS.Timeout;

    function handleHeadshotSlideshow() {
        if (window.innerWidth < 768) {
            const images = document.querySelectorAll(".headshot-image");
            let currentIndex = 0;

            intervalId = setInterval(() => {
                const prevIndex = currentIndex;
                currentIndex = (currentIndex + 1) % images.length;

                // Hide previous image
                images[prevIndex].classList.toggle("opacity-0");

                // Show current image
                images[currentIndex].classList.toggle("opacity-0");
            }, 4000);
        }
    }
    window.addEventListener("resize", handleHeadshotSlideshow);
    window.addEventListener("load", handleHeadshotSlideshow);
</script>
