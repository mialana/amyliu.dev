---
import "@/styles/global.css";
import Header from "@/components/Header.astro";
import SideBar from "@/components/SideBar";

enum LayoutEnum {
    DEFAULT = "grid-cols-[auto_1fr_auto]",
    HIDE_NAV = "grid-cols-[0px_1fr_auto]",
    HIDE_ASIDE = "grid-cols-[auto_1fr_0px]",
    HIDE_BOTH = "grid-cols-[0px_1fr_0px]",
}

function extractLayout(key: string): LayoutEnum | undefined {
    return LayoutEnum[key as keyof typeof LayoutEnum];
}

interface Props {
    title: string;
    layout?: keyof typeof LayoutEnum;
}

const { title, layout = "DEFAULT" } = Astro.props;

const dynamic_layout = extractLayout(layout);
---

<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <link rel="sitemap" href="/sitemap-index.xml" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content={Astro.generator} />
        <title>{title} Â· Amy Liu</title>
    </head>
    <body
        class=`grid h-screen w-screen max-h-screen max-w-screen grid-rows-[auto_minmax(0,1fr)_auto] gap-4 ${dynamic_layout}`
    >
        <header class="col-span-3 h-24"><Header /></header>
        <nav id="nav-grid-cell">
            <SideBar position="Left" client:load />
        </nav>
        <main class="max-h-full overflow-y-scroll"><slot /></main>
        <aside id="aside-grid-cell">
            <SideBar position="Right" client:load />
        </aside>
        <footer class="col-span-3 h-16 outline"></footer>
    </body>
</html>
